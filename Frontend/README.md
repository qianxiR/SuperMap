# ğŸ—ºï¸ æ™ºèƒ½åŸå¸‚åœ°å›¾åˆ†æç³»ç»Ÿ

> åŸºäº Vue 3 + SuperMap iServer çš„ç°ä»£åŒ– WebGIS åº”ç”¨ï¼Œé›†æˆ AI åŠ©æ‰‹ä¸ä¼ ç»Ÿ GIS åˆ†æåŠŸèƒ½

[![Vue](https://img.shields.io/badge/Vue-3.5.18-4FC08D?logo=vue.js)](https://vuejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9.2-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-7.0.6-646CFF?logo=vite)](https://vitejs.dev/)
[![SuperMap](https://img.shields.io/badge/SuperMap-iServer-00A0E9)](https://www.supermap.com/)

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [æµ‹è¯•](#æµ‹è¯•)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æ™ºèƒ½åŸå¸‚åœ°å›¾åˆ†æç³»ç»Ÿæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ WebGIS åº”ç”¨ï¼Œé›†æˆäº†ä¼ ç»Ÿ GIS åˆ†æåŠŸèƒ½ä¸ AI æ™ºèƒ½åŠ©æ‰‹ã€‚ç³»ç»Ÿé‡‡ç”¨åŒæ¨¡å¼è®¾è®¡ï¼Œä¸ºç”¨æˆ·æä¾›çµæ´»çš„åœ°å›¾åˆ†æä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- **åŒæ¨¡å¼è®¾è®¡**: LLM æ™ºèƒ½æ¨¡å¼ + ä¼ ç»Ÿ GIS æ¨¡å¼
- **å®æ—¶åœ°å›¾äº¤äº’**: åŸºäº OpenLayers çš„é«˜æ€§èƒ½åœ°å›¾æ¸²æŸ“
- **æ™ºèƒ½åˆ†æå·¥å…·**: ç¼“å†²åŒºã€è·ç¦»ã€å¯è¾¾æ€§ç­‰ç©ºé—´åˆ†æ
- **AI åŠ©æ‰‹é›†æˆ**: è‡ªç„¶è¯­è¨€äº¤äº’çš„åœ°å›¾æ“ä½œ
- **å“åº”å¼ç•Œé¢**: ç°ä»£åŒ– UI è®¾è®¡ï¼Œæ”¯æŒä¸»é¢˜åˆ‡æ¢

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ§  LLM æ™ºèƒ½æ¨¡å¼
- **è‡ªç„¶è¯­è¨€äº¤äº’**: é€šè¿‡èŠå¤©ç•Œé¢æ“ä½œåœ°å›¾
- **æ™ºèƒ½è¦ç´ è¯†åˆ«**: AI è¾…åŠ©çš„è¦ç´ æŸ¥è¯¢ä¸é€‰æ‹©
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: åŸºäºåœ°å›¾çŠ¶æ€çš„æ™ºèƒ½å»ºè®®
- **å¤šè½®å¯¹è¯**: æ”¯æŒå¤æ‚çš„åœ°å›¾åˆ†æä»»åŠ¡

### ğŸ› ï¸ ä¼ ç»Ÿ GIS æ¨¡å¼
- **å›¾å±‚ç®¡ç†**: å®Œæ•´çš„å›¾å±‚æ§åˆ¶ä¸æ ·å¼è®¾ç½®
- **è¦ç´ æŸ¥è¯¢**: å±æ€§æŸ¥è¯¢ä¸ç©ºé—´æŸ¥è¯¢
- **ç©ºé—´åˆ†æ**: 
  - ç¼“å†²åŒºåˆ†æ
  - æœ€çŸ­è·¯å¾„åˆ†æ
- **ç¼–è¾‘å·¥å…·**: è¦ç´ åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤

### ğŸ¨ ç”¨æˆ·ç•Œé¢
- **å“åº”å¼è®¾è®¡**: é€‚é…å„ç§å±å¹•å°ºå¯¸
- **ä¸»é¢˜åˆ‡æ¢**: æ˜æš—ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- **é€šçŸ¥ç³»ç»Ÿ**: å®æ—¶æ“ä½œåé¦ˆ
- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„åº”ç”¨çŠ¶æ€æŒä¹…åŒ–

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Vue 3.5.18**: æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript 5.9.2**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite 7.0.6**: ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

### çŠ¶æ€ç®¡ç†
- **Pinia 3.0.3**: Vue å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“

### åœ°å›¾å¼•æ“
- **OpenLayers 10.6.1**: å¼€æºåœ°å›¾åº“
- **SuperMap iServer**: ä¼ä¸šçº§ GIS æœåŠ¡

### UI ç»„ä»¶
- **Ant Design Vue 4.2.6**: ä¼ä¸šçº§ UI ç»„ä»¶åº“
- **Splitpanes 4.0.4**: å¯æ‹–æ‹½åˆ†å‰²é¢æ¿

### è·¯ç”±ç®¡ç†
- **Vue Router 4.5.1**: Vue.js å®˜æ–¹è·¯ç”±ç®¡ç†å™¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ api/                        # API æ¥å£å±‚ï¼ˆç»Ÿä¸€è¯·æ±‚å°è£…ä¸åç«¯äº¤äº’ï¼‰
â”‚   â”œâ”€â”€ analysis.ts             # ç©ºé—´åˆ†æç›¸å…³æ¥å£ï¼ˆç¼“å†²åŒº/æœ€çŸ­è·¯å¾„/å åŠ ï¼‰
â”‚   â”œâ”€â”€ supermap.ts             # SuperMap iServer ç›¸å…³æ¥å£å°è£…
â”‚   â”œâ”€â”€ user.ts                 # ç”¨æˆ·/è®¤è¯ç›¸å…³æ¥å£
â”‚   â””â”€â”€ config.ts               # Axios å®ä¾‹ã€æ‹¦æˆªå™¨ã€åŸºç¡€é…ç½®
â”‚
â”œâ”€â”€ components/                 # é€šç”¨ç»„ä»¶åº“ï¼ˆä»…ç»„åˆ UIï¼Œä¸å«ä¸šåŠ¡ï¼‰
â”‚   â”œâ”€â”€ Layout/                 # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AppHeader.vue       # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ AppSidebar.vue      # ä¾§è¾¹æ /å·¥å…·æ å®¹å™¨
â”‚   â”‚   â””â”€â”€ AppMain.vue         # ä¸»å†…å®¹åŒºåŸŸå®¹å™¨
â”‚   â”œâ”€â”€ Map/                    # åœ°å›¾åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MapContainer.vue    # åœ°å›¾å®¹å™¨ï¼ˆæŒ‚è½½ OpenLayers åœ°å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ LayerManager.vue    # å›¾å±‚ç®¡ç†é¢æ¿ï¼ˆæ˜¾ç¤º/é¡ºåº/æ ·å¼ï¼‰
â”‚   â”‚   â””â”€â”€ Controls.vue        # åœ°å›¾æ§ä»¶ï¼ˆç¼©æ”¾/æ¯”ä¾‹å°º/å®šä½ï¼‰
â”‚   â””â”€â”€ UI/                     # å¤ç”¨ UI ç»„ä»¶
â”‚       â”œâ”€â”€ PanelWindow.vue     # å¯åœé /å¯æ‹–åŠ¨çš„é¢æ¿çª—å£
â”‚       â”œâ”€â”€ SecondaryButton.vue # æ¬¡çº§æŒ‰é’®ç»„ä»¶
â”‚       â”œâ”€â”€ DropdownSelect.vue  # ä¸‹æ‹‰é€‰æ‹©ç»„ä»¶
â”‚       â””â”€â”€ TipWindow.vue       # æµ®åŠ¨æç¤º/é€šçŸ¥ç»„ä»¶
â”‚
â”œâ”€â”€ composables/                # ç»„åˆå¼å‡½æ•°ï¼ˆä¸šåŠ¡é€»è¾‘ä¸åœ°å›¾äº¤äº’ï¼‰
â”‚   â”œâ”€â”€ useMap.ts               # åœ°å›¾å®ä¾‹åˆå§‹åŒ–/è§†å›¾æ§åˆ¶/äº‹ä»¶æ³¨å†Œ
â”‚   â”œâ”€â”€ useLayerManager.ts      # å›¾å±‚å¢åˆ æ”¹/æ ·å¼/å¯¼å…¥å¯¼å‡º
â”‚   â”œâ”€â”€ useBufferAnalysis.ts    # ç¼“å†²åŒºåˆ†æé€»è¾‘ï¼ˆTurf + æ˜¾ç¤ºï¼‰
â”‚   â”œâ”€â”€ useShortestPathAnalysis.ts      # æœ€çŸ­è·¯å¾„åˆ†æé€»è¾‘ï¼ˆTurf.shortestPathï¼‰
â”‚   â”œâ”€â”€ useOverlayAnalysis.ts   # å åŠ åˆ†æé€»è¾‘ï¼ˆintersect/union/...ï¼‰

â”‚   â”œâ”€â”€ useFeatureQuery.ts      # è¦ç´ å±æ€§/ç©ºé—´æŸ¥è¯¢
â”‚   â”œâ”€â”€ useEditing.ts           # è¦ç´ ç¼–è¾‘ï¼ˆç»˜åˆ¶/ä¿®æ”¹/åˆ é™¤ï¼‰
â”‚   â”œâ”€â”€ useSelection.ts         # é€‰æ‹©äº¤äº’ï¼ˆç‚¹å‡»/æ¡†é€‰ï¼‰
â”‚   â”œâ”€â”€ useTheme.ts             # ä¸»é¢˜ä¸é…è‰²ï¼ˆæ˜æš—/ä¸»é¢˜è‰²ï¼‰
â”‚   â””â”€â”€ usePersist.ts           # æœ¬åœ°æŒä¹…åŒ–ï¼ˆlocalStorage/sessionï¼‰
â”‚
â”œâ”€â”€ stores/                     # Pinia çŠ¶æ€ä¸­å¿ƒï¼ˆä»…å­˜çŠ¶æ€ä¸çº¯æ“ä½œï¼‰
â”‚   â”œâ”€â”€ mapStore.ts             # åœ°å›¾/è§†å›¾/åº•å›¾/å½“å‰ä¸­å¿ƒä¸ç¼©æ”¾
â”‚   â”œâ”€â”€ layerStore.ts           # å›¾å±‚æ¸…å•/å¯è§æ€§/é¡ºåº/å½“å‰é€‰ä¸­å›¾å±‚
â”‚   â”œâ”€â”€ analysisStore.ts        # åˆ†æå·¥å…·å¯ç”¨çŠ¶æ€/é¢æ¿çŠ¶æ€/è¿è¡Œæ€
â”‚   â”œâ”€â”€ selectionStore.ts       # é€‰æ‹©è¦ç´ é›†åˆ/æ¥æº/é«˜äº®å±‚å¼•ç”¨
â”‚   â”œâ”€â”€ areaSelectionStore.ts   # åŒºåŸŸé€‰æ‹©ï¼ˆçŸ©å½¢/å¤šè¾¹å½¢ï¼‰
â”‚   â”œâ”€â”€ featureQueryStore.ts    # å±æ€§/ç©ºé—´æŸ¥è¯¢æ¡ä»¶ä¸ç»“æœ
â”‚   â”œâ”€â”€ userStore.ts            # ç”¨æˆ·/ä¼šè¯/æƒé™ï¼ˆå‰ç«¯æ€ï¼‰
â”‚   â”œâ”€â”€ uiStore.ts              # å…¨å±€ UI çŠ¶æ€ï¼ˆä¸»é¢˜/æŠ˜å /å°ºå¯¸ï¼‰
â”‚   â””â”€â”€ modeStateStore.ts       # æ¨¡å¼åˆ‡æ¢ï¼ˆLLM æ¨¡å¼/ä¼ ç»Ÿæ¨¡å¼ï¼‰
â”‚
â”œâ”€â”€ views/                      # é¡µé¢ä¸ä¸šåŠ¡é¢æ¿
â”‚   â”œâ”€â”€ auth/                   # ç™»å½•/æ³¨å†Œ/æ‰¾å›å¯†ç 
â”‚   â”œâ”€â”€ dashboard/              # ä¸»å·¥ä½œå°
â”‚   â”‚   â”œâ”€â”€ TraditionalMode.vue # ä¼ ç»Ÿ GIS å·¥ä½œå°ï¼ˆå·¥å…·é¢æ¿å®¹å™¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ LLMMode.vue         # LLM æ™ºèƒ½æ¨¡å¼å·¥ä½œå°
â”‚   â”‚   â””â”€â”€ tools/              # å„ç±»åˆ†æ/å·¥å…·é¢æ¿
â”‚   â”‚       â”œâ”€â”€ BufferAnalysisPanel.vue     # ç¼“å†²åŒºåˆ†æé¢æ¿
â”‚   â”‚       â”œâ”€â”€ DistanceAnalysisPanel.vue   # æœ€çŸ­è·¯å¾„/è·ç¦»åˆ†æé¢æ¿
â”‚   â”‚       â”œâ”€â”€ OverlayAnalysisPanel.vue    # å åŠ åˆ†æé¢æ¿
â”‚   â”‚       â”œâ”€â”€ FeatureQueryPanel.vue       # è¦ç´ æŸ¥è¯¢é¢æ¿
â”‚   â”‚       â””â”€â”€ EditTools.vue               # ç¼–è¾‘å·¥å…·é¢æ¿
â”‚   â””â”€â”€ misc/                  # å…¶ä»–é¡µé¢ï¼ˆå…³äº/è®¾ç½®/ç¤ºä¾‹ï¼‰
â”‚
â”œâ”€â”€ router/                     # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.ts                # è·¯ç”±è¡¨/å®ˆå«/æ‡’åŠ è½½é…ç½®
â”‚
â”œâ”€â”€ styles/                     # å…¨å±€æ ·å¼ä¸ä¸»é¢˜
â”‚   â””â”€â”€ theme.css               # ä¸»é¢˜å˜é‡ï¼ˆé¢œè‰²/é—´è·/é˜´å½±ï¼‰
â”‚
â”œâ”€â”€ types/                      # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ analysis.d.ts           # åˆ†æç›¸å…³ç±»å‹ï¼ˆå‚æ•°/ç»“æœï¼‰
â”‚   â”œâ”€â”€ feature.d.ts            # è¦ç´ ä¸å›¾å±‚ç±»å‹
â”‚   â””â”€â”€ common.d.ts             # é€šç”¨å·¥å…·ç±»å‹
â”‚
â”œâ”€â”€ utils/                      # å·¥å…·åº“ï¼ˆçº¯å‡½æ•°/æ— å‰¯ä½œç”¨ä¼˜å…ˆï¼‰
â”‚   â”œâ”€â”€ selectionIO.ts          # é€‰æ‹©è¦ç´ ä¿å­˜/è¯»å–ï¼ˆGeoJSON/Featuresï¼‰
â”‚   â”œâ”€â”€ geometry.ts             # å‡ ä½•è½¬æ¢/åæ ‡ç³»/æµ‹é‡
â”‚   â”œâ”€â”€ download.ts             # å¯¼å‡ºç»“æœï¼ˆGeoJSON/CSV/PNGï¼‰
â”‚   â”œâ”€â”€ mapStyle.ts             # æ ·å¼ç”Ÿæˆï¼ˆä½¿ç”¨ theme.css å˜é‡ï¼‰
â”‚   â””â”€â”€ logger.ts               # ç»Ÿä¸€æ—¥å¿—/åŸ‹ç‚¹ï¼ˆå¯é€‰ï¼‰
â”‚
â”œâ”€â”€ main.js                     # åº”ç”¨å…¥å£ï¼ˆåˆ›å»ºåº”ç”¨ã€æ³¨å†Œæ’ä»¶ã€æŒ‚è½½ï¼‰
â”œâ”€â”€ App.vue                     # æ ¹ç»„ä»¶ï¼ˆå¸ƒå±€éª¨æ¶ä¸ <router-view/>ï¼‰
â””â”€â”€ router/guard.d.ts           # è·¯ç”±å®ˆå«ç±»å‹ï¼ˆå¯é€‰ï¼‰
```

### src ç›®å½•è¯¦è§£

- api: ç»Ÿä¸€å°è£…è¯·æ±‚ä¸åç«¯äº¤äº’ï¼›æ¯ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶ï¼Œé›†ä¸­åœ¨ `config.ts` åˆ›å»º Axios å®ä¾‹ä¸æ‹¦æˆªå™¨ã€‚
- components: çº¯ UI ç»„ä»¶ä¸å¸ƒå±€ç»„ä»¶ï¼Œä¸åŒ…å«ä¸šåŠ¡çŠ¶æ€ï¼›ä¼˜å…ˆå¤ç”¨ä¸ç»„åˆã€‚
- composables: ç»„åˆå¼å‡½æ•°ï¼Œæ‰¿è½½ä¸šåŠ¡é€»è¾‘ä¸åœ°å›¾äº¤äº’ï¼Œè¿”å›æ˜ç¡®çš„ APIï¼ˆstate + actionsï¼‰ã€‚
- stores: Pinia çŠ¶æ€ä¸­å¿ƒï¼Œåªå­˜çŠ¶æ€ä¸åŒæ­¥/å¼‚æ­¥ actionï¼›ç¦æ­¢ç›´æ¥æ“ä½œ DOMã€‚
- views: é¡µé¢ä¸ä¸šåŠ¡é¢æ¿ï¼Œè´Ÿè´£ç»„åˆ components ä¸ composablesï¼Œå°½é‡ä¿æŒâ€œè–„è§†å›¾â€ã€‚
- router: è·¯ç”±è¡¨ä¸å®ˆå«ï¼ŒæŒ‰éœ€åšåŠ¨æ€è·¯ç”±ä¸æ‡’åŠ è½½ã€‚
- styles: å…¨å±€ä¸»é¢˜ä¸å˜é‡ï¼Œé¢œè‰²éœ€å¼•ç”¨ `theme.css` å˜é‡ï¼ˆæ”¯æŒæš—è‰²æ¨¡å¼ï¼‰ã€‚
- types: è·¨æ¨¡å—å…±äº«çš„ç±»å‹å®šä¹‰ï¼Œé¿å…åœ¨å®ç°ä¸­é‡å¤å£°æ˜ã€‚
- utils: çº¯å‡½æ•°å·¥å…·åº“ï¼Œé¿å…è€¦åˆæ¡†æ¶ä¸å…¨å±€çŠ¶æ€ï¼Œå¯å•æµ‹ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20.19.0 æˆ– >= 22.12.0
- npm >= 8.0.0

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd Frontend

# å®‰è£…ä¾èµ–
npm install
```

### å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®åº”ç”¨
# http://localhost:5173
```

### æ„å»ºé¡¹ç›®

```bash
pnpm build
```
æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `dist` ç›®å½•ä¸­ã€‚

## ğŸ”§ å¼€å‘æŒ‡å—

## ğŸ§© UI ç»„ä»¶åº“


- **AutoScrollContainer** (`src/components/UI/AutoScrollContainer.vue`): è‡ªåŠ¨æ»šåŠ¨å®¹å™¨ï¼Œæä¾›æŒ‰ç´¢å¼•/å…ƒç´ æ»šåŠ¨ã€é¡¶éƒ¨/åº•éƒ¨æ»šåŠ¨ã€æ»šåŠ¨ä¿¡æ¯å›ä¼ ï¼›æ”¯æŒ selectedIndex è”åŠ¨ä¸å±…ä¸­æ˜¾ç¤ºã€‚æ ·å¼ä¸ºçª„æ»šåŠ¨æ¡ã€å¹³æ»‘æ»šåŠ¨ã€æ— æ¨ªå‘æ»šåŠ¨ï¼Œä½¿ç”¨ä¸»é¢˜å˜é‡ `--scrollbar-*`ã€‚
- **ButtonGroup** (`src/components/UI/ButtonGroup.vue`): åˆ†æ®µæŒ‰é’®ç»„ï¼Œ`buttons[{id,text}]` + `activeButton` æ§åˆ¶é€‰ä¸­ï¼Œå‘å°„ `select`ã€‚æ ·å¼ä¸ºåœ†è§’å®¹å™¨+é€æ˜æŒ‰é’®ï¼Œæ¿€æ´»æ€ä½¿ç”¨ `--accent` é«˜äº®ã€‚
- **ConfirmDialog** (`src/components/UI/ConfirmDialog.vue`): ç¡®è®¤å¯¹è¯æ¡†ï¼Œ`visible/title/message/confirmText/cancelText`ï¼Œå‘å°„ `confirm/cancel/close`ï¼Œé®ç½©ç‚¹å‡»æˆ– visible=false å‡è§¦å‘å…³é—­ã€‚æ ·å¼ä¸ºé¢æ¿+é˜´å½±+ç®€åŒ–æ·¡å…¥ï¼ŒæŒ‰é’®åˆ† primary/secondaryã€‚
- **DropdownSelect** (`src/components/UI/DropdownSelect.vue`): è½»é‡ä¸‹æ‹‰é€‰æ‹©ï¼Œ`v-model` + `options[{value,label,disabled}]`ï¼Œé”®ç›˜ Enter/Escape æ”¯æŒï¼Œå¤±ç„¦/å¤–ç‚¹å…³é—­ã€‚æ ·å¼ä¸ºé¢æ¿è¾¹æ¡†ã€èšç„¦æè¾¹ã€é€‰é¡¹æ»šåŠ¨æ¡ï¼Œä½¿ç”¨ `--accent`ã€`--border` ç­‰å˜é‡ã€‚
- **EditModal** (`src/components/UI/EditModal.vue`): å¤šè¡¨å•ç¼–è¾‘å¼¹çª—ï¼ˆapi-key/preference/prompt/agentï¼‰ï¼ŒåŒ…å«è¡¨å•æ ¡éªŒä¸ä¿å­˜å›ä¼  `save(data)`ï¼›é›†æˆ `DropdownSelect`ã€‚æ ·å¼ä¸ºåœ†è§’é¢æ¿ã€åˆ†åŒºã€é¡µè„šä¸»/æ¬¡æŒ‰é’®ã€‚
- **IconButton** (`src/components/UI/IconButton.vue`): å›¾æ ‡æŒ‰é’®ï¼Œæ”¯æŒ `size='small|medium|large'` ä¸ç¦ç”¨æ€ï¼Œå‘å°„ `click`ã€‚æ ·å¼ä¸ºæ–¹å½¢åœ†è§’ã€æ‚¬æµ®å¾®åŠ¨æ•ˆã€SVG å›¾æ ‡æ·±åº¦é€‰æ‹©å™¨å°ºå¯¸åŒæ­¥ã€‚
- **LLMInputGroup** (`src/components/UI/LLMInputGroup.vue`): è¾“å…¥ç»„ï¼Œ`as='input|textarea'`ï¼Œ`v-model`ã€Enter äº‹ä»¶ä¸è‡ªåŠ¨é«˜åº¦è°ƒæ•´ï¼ˆtextareaï¼‰ã€‚æ ·å¼ä¸ºé€æ˜èƒŒæ™¯ã€æ— è¾¹æ¡†ã€ç»†æ»šåŠ¨æ¡ï¼Œä½¿ç”¨ `--sub` å ä½è‰²ã€‚
- **NotificationManager** (`src/components/UI/NotificationManager.vue`): é€šçŸ¥ç®¡ç†å™¨ï¼Œæš´éœ² `addNotification/removeNotification`ï¼Œæ¥ç®¡ `NotificationToast` é˜Ÿåˆ—ä¸è¿‡æ¸¡ã€‚
- **NotificationToast** (`src/components/UI/NotificationToast.vue`): æµ®åŠ¨æç¤ºï¼Œæ”¯æŒ success/error/infoã€è‡ªåŠ¨å…³é—­ï¼ˆdurationï¼‰ä¸æ‰‹åŠ¨å…³é—­ã€‚æ ·å¼ä¸ºå·¦ä¾§è‰²æ¡ã€é¢æ¿+è¾¹æ¡†+é˜´å½±ã€åº•éƒ¨å›ºå®šï¼Œè¿‡æ¸¡ä»åº•éƒ¨æ»‘å…¥/å‡ºã€‚
- **PanelContainer** (`src/components/UI/PanelContainer.vue`): é¢æ¿å®¹å™¨ï¼Œ`compact/bordered/shadowed/animated` å¯é€‰ã€‚æ ·å¼ä½¿ç”¨ `--panel/--border/--glow`ï¼Œå¸¦æ·¡å…¥åŠ¨ç”»ä¸å“åº”å¼å†…è¾¹è·ã€‚
- **PanelWindow** (`src/components/UI/PanelWindow.vue`): é¢æ¿çª—å£/æµ®çª—ï¼Œæ”¯æŒåµŒå…¥æ¨¡å¼ã€ä½ç½®ä¸å°ºå¯¸ã€å¯èšç„¦ã€å…³é—­ã€æ»šåŠ¨æŒä¹…åŒ–ã€‚æ ·å¼ä¸ºè¾¹æ¡†+é˜´å½±+æ ‡é¢˜åŒº+å¯æ»šåŠ¨å†…å®¹ï¼Œå¸¦æ·¡å…¥åŠ¨ç”»ã€‚
- **PrimaryButton** (`src/components/UI/PrimaryButton.vue`): æŒ‰é’®ï¼ˆprimary/secondary/dangerï¼‰ï¼Œæ”¯æŒç¦ç”¨ä¸ active é«˜äº®ï¼Œå‘å°„ `click`ã€‚æ ·å¼éµå¾ªä¸»é¢˜æŒ‰é’®å˜é‡ã€‚
- **QueryConditionRow** (`src/components/UI/QueryConditionRow.vue`): æŸ¥è¯¢æ¡ä»¶è¡Œï¼Œå­—æ®µåè¾“å…¥ + æ“ä½œç¬¦ä¸‹æ‹‰ + å€¼è¾“å…¥ï¼Œä¾æ®å­—æ®µç±»å‹æç¤ºä¸è½¬æ¢ï¼Œå‘å°„ `update(condition)`ã€‚æ ·å¼ä¸ºå¡ç‰‡åˆ†åŒºå¸ƒå±€ã€‚
- **SecondaryButton** (`src/components/UI/SecondaryButton.vue`): æ¬¡çº§æŒ‰é’®ï¼ˆprimary/secondary/dangerï¼‰ï¼Œæ”¯æŒ loading æ€ä¸ activeï¼Œå‘å°„ `click`ã€‚æ ·å¼å«å¾®åŠ¨æ•ˆä¸ loading spinnerã€‚
- **SplitPanel** (`src/components/UI/SplitPanel.vue`): é¢æ¿åˆ†å‰²å™¨ï¼Œå°è£… splitpanesï¼Œæ”¯æŒæ–¹å‘ã€ä¸»é¢˜ï¼ˆdefault/chat/customï¼‰ä¸è‡ªå®šä¹‰ slotã€‚æ ·å¼è¦†ç›– splitter ä¸ paneã€‚
- **TipWindow** (`src/components/UI/TipWindow.vue`): è½»æç¤ºå®¹å™¨ï¼Œæ–‡æœ¬ä¸å¯é€‰å›¾æ ‡ï¼Œå˜ä½“ info/warning/success/errorã€‚æ ·å¼ä¸ºå·¦è‰²æ¡å¡ç‰‡ï¼Œç¦ç”¨åŠ¨ç”»é˜²é—ªçƒã€‚
- **TraditionalInputGroup** (`src/components/UI/TraditionalInputGroup.vue`): ä¼ ç»Ÿè¾“å…¥ç»„ï¼Œ`type=input|textarea|select`ï¼Œç»Ÿä¸€è¾“å…¥æ ·å¼ä¸äº¤äº’ï¼Œå‘å°„ `update:modelValue/enter`ã€‚

## ğŸ”„ æ•°æ®äº¤äº’ä¸çŠ¶æ€ç®¡ç†

ä»¥ä¸‹ä¸º 6 ä¸ªåŸºç¡€å·¥å…·ï¼ˆæ¥è‡ª tools æ–‡ä»¶ï¼‰çš„æ•°æ®äº¤äº’é€»è¾‘ä¸çŠ¶æ€ç®¡ç†è¦ç‚¹ï¼Œå‡æŒ‰â€œè¾“å…¥æ•°æ®æ ¼å¼ / è°ƒç”¨çš„å‡½æ•° / è¿”å›æ•°æ®æ ¼å¼â€åˆ—å‡ºã€‚

1) å›¾å±‚ç®¡ç†ï¼ˆlayer managerï¼‰
- è¾“å…¥æ•°æ®æ ¼å¼: `layerId: string`ï¼›æ“ä½œ `toggle|remove`
- è°ƒç”¨çš„å‡½æ•°: `useLayerManager().toggleLayerVisibility(layerId)` / `useLayerManager().removeLayer(layerId)`
- è¿”å›æ•°æ®æ ¼å¼: `void | boolean`ï¼ˆç§»é™¤è¿”å›å¸ƒå°”å€¼ï¼‰
- çŠ¶æ€ç®¡ç†: `mapStore.vectorLayers`ï¼›é€‰æ‹©é«˜äº®é€šè¿‡ `mapStore.selectLayer` æ¸…ç†ï¼ŒåŒæ­¥ `selectionStore`/`popupStore`/`featureQueryStore`

### å›¾å±‚ç®¡ç†ï¼šä½ç½®ã€æ•°æ®æ¥å…¥ä¸è‡ªåŠ¨åŒæ­¥

- ä½ç½®:
  - é¢æ¿ç»„ä»¶: `src/views/dashboard/traditional/tools/LayerManager.vue`
  - ä¸šåŠ¡é€»è¾‘: `src/composables/useLayerManager.ts`
  - çŠ¶æ€æº: `src/stores/mapStore.ts` çš„ `vectorLayers: MapLayer[]`

- æ•°æ®æ¥å…¥æ–¹æ³•:
  - å›¾å±‚ç®¡ç†é¢æ¿ä»¥ `mapStore.vectorLayers` ä¸ºå•ä¸€æ•°æ®æºï¼›æœ¬åœ°ä¿å­˜çš„å›¾å±‚é€šè¿‡ `useLayerManager().saveFeaturesAsLayer(features, name, sourceType)` å†™å…¥ï¼Œ`source='local'`ã€‚
  - SuperMap æœåŠ¡å›¾å±‚åœ¨åœ°å›¾åˆå§‹åŒ–æ—¶å†™å…¥ `vectorLayers`ï¼Œ`source='supermap'`ã€‚

- ç›‘å¬å¤–éƒ¨æ•°æ®å˜åŒ–å¹¶è‡ªåŠ¨åŠ å…¥åˆ—è¡¨:
  - å½“å…¶ä»–æ¨¡å—å‘ `ol.Map` æ·»åŠ å›¾å±‚ï¼ˆå¦‚ç¬¬ä¸‰æ–¹/å¤–éƒ¨å›¾å±‚ï¼‰æ—¶ï¼Œç›‘å¬ `map.getLayers()` çš„ `add`/`remove` äº‹ä»¶ï¼ŒåŒæ­¥åˆ° `mapStore.vectorLayers`ï¼Œå¹¶æ ‡è®° `source='external'`ã€‚

2) æŒ‰å±æ€§é€‰æ‹©è¦ç´ ï¼ˆattribute selectionï¼‰
- è¾“å…¥æ•°æ®æ ¼å¼: `QueryConfig`ï¼ˆ`{ condition: { fieldName: string, operator: 'eq'|'gt'|'lt'|'gte'|'lte'|'like', value: string|number|boolean } }`ï¼‰ï¼Œä»¥åŠ `selectedLayerId: string`
- è°ƒç”¨çš„å‡½æ•°: `useFeatureQueryStore().executeQuery()`
- è¿”å›æ•°æ®æ ¼å¼: `{ success: boolean, data: ol.Feature[], totalCount: number, queryType: 'frontend', error?: string }`
- çŠ¶æ€ç®¡ç†: `featureQueryStore.queryResults`ã€`selectedFeatureIndex`ï¼›ç»“æœä»¥ `sourceTag='query'` é«˜äº®åˆ° `mapStore.selectLayer`

- æŒ‰å±æ€§é€‰æ‹© â†’ å¦å­˜ä¸ºå›¾å±‚:
  - ä½¿ç”¨ `useFeatureQueryStore().queryResults`ï¼ˆ`ol.Feature[]`ï¼‰ä½œä¸ºè¾“å…¥
  - è°ƒç”¨ `useLayerManager().saveFeaturesAsLayer(results, layerName, 'query')`
  - æˆåŠŸåå°†ä»¥ `source='local'`ã€`sourceType='query'` çš„æ–°çŸ¢é‡å›¾å±‚åŠ å…¥ `mapStore.vectorLayers`

3) æŒ‰åŒºåŸŸé€‰æ‹©è¦ç´ ï¼ˆarea selectionï¼‰
- ä½ç½®ï¼šFrontend\src\composables\useFeatureQuery.ts
- è¾“å…¥æ•°æ®æ ¼å¼: æ‹‰æ¡†èŒƒå›´ `extent: [minX, minY, maxX, maxY]`
- è°ƒç”¨çš„å‡½æ•°: `useFeatureSelection().selectFeaturesInExtent(extent)`
- è¿”å›æ•°æ®æ ¼å¼: `ol.Feature[]`ï¼ˆæ¯ä¸ªè¦ç´  `sourceTag='area'`ï¼‰
- çŠ¶æ€ç®¡ç†: `areaSelectionStore.selectedFeatures`ã€`selectedFeatureIndex`ï¼›é«˜äº®æ¸²æŸ“ `mapStore.selectLayer`

- æŒ‰åŒºåŸŸé€‰æ‹© â†’ å¦å­˜ä¸ºå›¾å±‚:
  - ä½¿ç”¨ `useAreaSelectionStore().selectedFeatures`ï¼ˆ`ol.Feature[]`ï¼‰ä½œä¸ºè¾“å…¥
  - è°ƒç”¨ `useLayerManager().saveFeaturesAsLayer(results, layerName, 'area')`
  - æˆåŠŸåå°†ä»¥ `source='local'`ã€`sourceType='area'` çš„æ–°çŸ¢é‡å›¾å±‚åŠ å…¥ `mapStore.vectorLayers`


4) ç¼“å†²åŒºåˆ†æï¼ˆbufferï¼‰
- è¾“å…¥æ•°æ®æ ¼å¼: `selectedFeature: ol.Feature`ï¼Œ`bufferDistance: number`ï¼Œ`selectedAnalysisLayerId: string`
- è°ƒç”¨çš„å‡½æ•°: `useBufferAnalysis().executeBufferAnalysis()`
- è¿”å›æ•°æ®æ ¼å¼: æš‚ä¸º UI æ¼”ç¤ºï¼›å®é™…åº”ä¸º `GeoJSON Feature | FeatureCollection`
- çŠ¶æ€ç®¡ç†: æœ¬åœ° `ref`ï¼ˆ`selectedFeature`, `bufferDistance`, `selectedAnalysisLayerId`ï¼‰ï¼›æç¤ºé€šè¿‡ `analysisStore`

- ç¼“å†²åŒºåˆ†æç»“æœ â†’ å¦å­˜ä¸ºå›¾å±‚:
  - è¾“å…¥æ•°æ®æ ¼å¼: `features: ol.Feature[]`ï¼ˆç”±ç¼“å†²ç»“æœ GeoJSON è½¬æ¢ï¼‰ï¼›`layerName: string`ï¼›`sourceType?: 'draw'|'area'|'query'`
  - è°ƒç”¨çš„å‡½æ•°: `useLayerManager().saveFeaturesAsLayer(features, layerName, sourceType)`
  - è¿”å›æ•°æ®æ ¼å¼: `Promise<boolean>`

5) æœ€çŸ­è·¯å¾„åˆ†æï¼ˆshortest-pathï¼‰
- è¾“å…¥æ•°æ®æ ¼å¼: `startPoint: ol.Feature`ï¼Œ`endPoint: ol.Feature`
- è°ƒç”¨çš„å‡½æ•°: `useShortestPathAnalysis().executePathAnalysis()`
- è¿”å›æ•°æ®æ ¼å¼: `{ distance: number, duration: number, pathType: string } | null`
- çŠ¶æ€ç®¡ç†: æœ¬åœ° `ref`ï¼ˆ`startPoint`, `endPoint`, `analysisResults`ï¼‰ï¼›æç¤ºé€šè¿‡ `analysisStore`

- æœ€çŸ­è·¯å¾„ â†’ å¦å­˜ä¸ºå›¾å±‚:
  - è¾“å…¥æ•°æ®æ ¼å¼: `features: ol.Feature[]`ï¼ˆç”±èµ·ç»ˆç‚¹æ„é€  `LineString`ï¼‰; `layerName: string`; `sourceType?: 'draw'|'area'|'query'`
  - è°ƒç”¨çš„å‡½æ•°: `useLayerManager().saveFeaturesAsLayer(features, layerName, sourceType)`
  - è¿”å›æ•°æ®æ ¼å¼: `Promise<boolean>`



### ç»„ä»¶å¼€å‘

- **ç»„ä»¶ä½ç½®**: ç»„ä»¶æ ¹æ®èŒè´£åˆ’åˆ†å­˜æ”¾åœ¨ `src/components/` ä¸‹çš„ `UI`, `Map`, `Layout` ç›®å½•ä¸­ã€‚
- **å‘½åè§„èŒƒ**: ç»„ä»¶æ–‡ä»¶åä½¿ç”¨ `PascalCase` (ä¾‹å¦‚: `MapViewer.vue`)ã€‚
- **è„šæœ¬è¯­æ³•**: ç»Ÿä¸€ä½¿ç”¨ `<script setup lang="ts">` è¯­æ³•ç³–ã€‚
- **Props & Emits**: ä½¿ç”¨ TypeScript å®šä¹‰ `props` å’Œ `emits`ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€‚

### çŠ¶æ€ç®¡ç† (Pinia)

- **æ¨¡å—åŒ–**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—æ‹¥æœ‰ç‹¬ç«‹çš„ store æ–‡ä»¶ï¼Œå­˜æ”¾äº `src/stores/`ã€‚
- **å‘½åè§„èŒƒ**: store æ–‡ä»¶åä½¿ç”¨ `camelCase` (ä¾‹å¦‚: `mapStore.ts`)ï¼Œå¯¼å‡ºçš„ store ä½¿ç”¨ `use...Store` æ ¼å¼ (ä¾‹å¦‚: `useMapStore`)ã€‚
- **é£æ ¼**: æ¨èä½¿ç”¨ Composition API é£æ ¼å®šä¹‰ storeï¼Œä»¥è·å¾—æ›´å¥½çš„ç±»å‹æ¨æ–­ã€‚
- **æ•°æ®è§£æ„**: åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `storeToRefs` æ¥è§£æ„ state å’Œ gettersï¼Œä»¥ä¿æŒå…¶å“åº”æ€§ã€‚

### è·¯ç”±ç®¡ç†

- **é…ç½®æ–‡ä»¶**: è·¯ç”±å®šä¹‰åœ¨ `src/router/index.ts` ä¸­ã€‚
- **æ‡’åŠ è½½**: é¡µé¢ç»„ä»¶ (`views`) åº”ä½¿ç”¨åŠ¨æ€å¯¼å…¥ (`() => import(...)`) å®ç°æ‡’åŠ è½½ã€‚

## ğŸ“œ æ ¸å¿ƒçº¦å®š

- **API é£æ ¼**: åŠŸèƒ½å®ç°éµå¾ª â€œè¾“å…¥ -> å¤„ç† -> è¾“å‡ºâ€ çš„ä¸‰æ®µå¼æ¨¡å¼ï¼Œä¸åŒ…å«å›é€€æˆ–æ ¡éªŒé€»è¾‘ã€‚
- **é¢œè‰²è§„èŒƒ**: é¢œè‰²ç»Ÿä¸€ä½¿ç”¨ `src/styles/theme.css` ä¸­å®šä¹‰çš„ CSS å˜é‡ï¼Œç¦æ­¢ç¡¬ç¼–ç é¢œè‰²å€¼ã€‚
- **å•ä½æ ‡å‡†**:
  - é¢ç§¯: å¹³æ–¹åƒç±³
  - è·ç¦»: åƒç±³
  - åæ ‡: åº¦ (ä¿ç•™ 6 ä½å°æ•°)
- **é€‰æ‹©ä¸IO**:
  - ä¸åŒæ¥æºçš„é€‰æ‹©è¦ç´ å­˜å‚¨åœ¨å„è‡ªçš„ store ä¸­ (`selectionStore`, `areaSelectionStore`, `featureQueryStore`)ã€‚
  - åœ°å›¾é«˜äº®é€šè¿‡ `mapStore.selectLayer` ç»Ÿä¸€ç®¡ç†ã€‚
  - ä½¿ç”¨ `src/utils/selectionIO.ts` ä¸­çš„å·¥å…·å‡½æ•°è¿›è¡Œè¦ç´ çš„ä¿å­˜ä¸è¯»å–ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

1.  **Fork** æœ¬ä»“åº“ã€‚
2.  **åˆ›å»º** ä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)ã€‚
3.  **æäº¤** ä½ çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)ã€‚
4.  **æ¨é€** åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)ã€‚
5.  **æ‰“å¼€** ä¸€ä¸ª Pull Requestã€‚

è¯·ç¡®ä¿ä½ çš„ä»£ç éµå¾ªé¡¹ç›®çš„å¼€å‘è§„èŒƒå’Œæ ¸å¿ƒçº¦å®šã€‚

---
*æ­¤ README æ–‡ä»¶æ—¨åœ¨åæ˜ é¡¹ç›®çš„å½“å‰çŠ¶æ€ã€‚å¦‚æœ‰å˜æ›´ï¼Œè¯·åŠæ—¶æ›´æ–°ã€‚*
