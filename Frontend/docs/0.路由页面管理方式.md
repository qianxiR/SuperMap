
# 路由页面管理方式

## 🗺️ 路由界面顶层设计架构

### **第一层：根路由 (Root Routes)**

```
/ (根路径)
├── /login (登录页面)
├── /register (注册页面)  
├── /profile (个人中心)
├── /Agent-management (AI管理)
└── /dashboard (主仪表板)
```

### **第二层：主仪表板路由 (Dashboard Routes)**

```
/dashboard
├── /dashboard/llm (LLM模式 - 默认)
├── /dashboard/chat-history (聊天历史)
└── /dashboard/traditional (传统模式)
```

### **第三层：传统模式子路由 (Traditional Sub-routes)**

```
/dashboard/traditional
├── /dashboard/traditional/layer (图层管理)
├── /dashboard/traditional/attribute-selection (按属性选择要素)
├── /dashboard/traditional/edit (图层编辑)
├── /dashboard/traditional/buffer (缓冲区分析)
├── /dashboard/traditional/distance (距离分析)
└── /dashboard/traditional/overlay (叠加分析)
```

## 🔗 路由链接的功能面板位置

### **1. 认证相关面板**
- **位置**: `src/views/auth/`
- **功能**: 用户登录、注册界面
- **路由**: `/login`, `/register`
- **组件文件**:
  - `Login.vue` → 用户登录界面
  - `Register.vue` → 用户注册界面

### **2. 主仪表板布局**
- **位置**: `src/views/Dashboard.vue`
- **功能**: 整体应用布局容器
- **路由**: `/dashboard`

### **3. 仪表板布局组件**
- **位置**: `src/components/Layout/DashboardLayout.vue`
- **功能**: 分割面板布局（地图区域 + 右侧功能面板）
- **包含**: 
  - 地图容器 (`SuperMapViewer`) - 已移动到 `src/views/dashboard/`
  - 右侧功能面板 (`RightPanel`) - 已移动到 `src/views/dashboard/`

### **4. 右侧功能面板容器**
- **位置**: `src/views/dashboard/RightPanel.vue`
- **功能**: 通过 `router-view` 渲染具体功能面板
- **特点**: 使用 `PanelWindow` 组件包装

### **5. LLM模式功能面板**
- **位置**: `src/views/dashboard/LLM/`
- **主面板**: `LLMMode.vue` (路由: `/dashboard/llm`)
- **子面板**: `ChatHistory.vue` (路由: `/dashboard/chat-history`)
- **工具面板**: `ChatAssistant.vue` (在 `LLMMode.vue` 中引用)

### **6. 传统模式功能面板**
- **位置**: `src/views/dashboard/traditional/`
- **主面板**: `TraditionalMode.vue` (路由: `/dashboard/traditional`)
- **工具面板位置**: `src/views/dashboard/traditional/tools/`
  - `LayerManager.vue` → 图层管理
  - `FeatureQueryPanel.vue` → 按属性选择要素  
  - `EditTools.vue` → 图层编辑
  - `BufferAnalysisPanel.vue` → 缓冲区分析
  - `DistanceAnalysisPanel.vue` → 距离分析
  - `OverlayAnalysisPanel.vue` → 叠加分析

### **7. 用户管理面板**
- **位置**: `src/views/profile/`
- **功能**: 用户个人资料管理
- **路由**: `/profile`
- **组件文件**:
  - `UserProfile.vue` → 用户个人中心

### **8. AI管理面板**
- **位置**: `src/views/management/`
- **功能**: AI Agent管理
- **路由**: `/Agent-management`
- **组件文件**:
  - `AIManagement.vue` → AI Agent管理界面

## 🏗️ 功能面板渲染流程

```
Dashboard.vue (根视图)
    ↓
DashboardLayout.vue (布局容器)
    ↓
RightPanel.vue (右侧面板容器)
    ↓
router-view (路由视图)
    ↓
具体功能面板组件 (根据当前路由渲染)
```

## 📁 完整的目录结构映射

### **第一层：根路由 (Root Routes)**
```
/ (根路径)
├── /login (登录页面) → src/views/auth/Login.vue
├── /register (注册页面) → src/views/auth/Register.vue
├── /profile (个人中心) → src/views/profile/UserProfile.vue
├── /Agent-management (AI管理) → src/views/management/AIManagement.vue
└── /dashboard (主仪表板) → src/views/Dashboard.vue
```

### **第二层：主仪表板路由 (Dashboard Routes)**
```
/dashboard
├── /dashboard/llm (LLM模式 - 默认) → src/views/dashboard/LLM/LLMMode.vue
├── /dashboard/chat-history (聊天历史) → src/views/dashboard/LLM/ChatHistory.vue
└── /dashboard/traditional (传统模式) → src/views/dashboard/traditional/TraditionalMode.vue
```

### **第三层：传统模式子路由 (Traditional Sub-routes)**
```
/dashboard/traditional
├── /dashboard/traditional/layer (图层管理) → src/views/dashboard/traditional/tools/LayerManager.vue
├── /dashboard/traditional/attribute-selection (按属性选择要素) → src/views/dashboard/traditional/tools/FeatureQueryPanel.vue
├── /dashboard/traditional/edit (图层编辑) → src/views/dashboard/traditional/tools/EditTools.vue
├── /dashboard/traditional/buffer (缓冲区分析) → src/views/dashboard/traditional/tools/BufferAnalysisPanel.vue
├── /dashboard/traditional/distance (距离分析) → src/views/dashboard/traditional/tools/DistanceAnalysisPanel.vue
└── /dashboard/traditional/overlay (叠加分析) → src/views/dashboard/traditional/tools/OverlayAnalysisPanel.vue
```

### **第四层：LLM模式工具面板 (LLM Tools)**
```
/dashboard/llm (在LLMMode.vue中引用)
└── ChatAssistant.vue → src/views/dashboard/LLM/tools/ChatAssistant.vue
```

### **第五层：组件层级结构 (Component Hierarchy)**
```
src/views/
├── auth/ (认证相关)
│   ├── Login.vue (登录界面)
│   └── Register.vue (注册界面)
├── profile/ (用户管理)
│   └── UserProfile.vue (个人中心)
├── management/ (系统管理)
│   └── AIManagement.vue (AI管理)
├── Dashboard.vue (主仪表板入口)
└── dashboard/ (仪表板功能)
    ├── LLM/ (AI助手模式)
    │   ├── LLMMode.vue (主界面)
    │   ├── ChatHistory.vue (聊天历史)
    │   └── tools/
    │       └── ChatAssistant.vue (AI助手工具)
    └── traditional/ (传统GIS模式)
        ├── TraditionalMode.vue (主界面)
        └── tools/ (GIS分析工具)
            ├── LayerManager.vue (图层管理)
            ├── FeatureQueryPanel.vue (要素查询)
            ├── EditTools.vue (图层编辑)
            ├── BufferAnalysisPanel.vue (缓冲区分析)
            ├── DistanceAnalysisPanel.vue (距离分析)
            └── OverlayAnalysisPanel.vue (叠加分析)
```

### **第六层：路由嵌套关系 (Route Nesting)**
```
路由层级关系图：
┌─────────────────────────────────────────────────────────────────┐
│                        根路由 (/)                              │
│                    ↓ 重定向到 /dashboard/llm                   │
└─────────────────────────────────────────────────────────────────┘
                                │
                    ┌───────────┼───────────┐
                    │           │           │
              /login        /register    /profile
              │              │              │
        Login.vue      Register.vue   UserProfile.vue
                    │           │           │
              /Agent-management    /dashboard
              │                    │
        AIManagement.vue    Dashboard.vue
                                │
                    ┌───────────┼───────────┐
                    │           │           │
              /dashboard/llm    /dashboard/chat-history    /dashboard/traditional
              │                 │                          │
        LLMMode.vue      ChatHistory.vue            TraditionalMode.vue
              │                                              │
        ChatAssistant.vue                              ┌─────┼─────┐
                                                       │     │     │
                                              /layer  /attribute-selection /area-selection /buffer /distance /overlay
                                                │       │      │      │        │        │
                                        LayerManager FeatureQuery EditTools BufferAnalysis DistanceAnalysis OverlayAnalysis
```

### **第七层：功能模块分类 (Feature Module Categories)**
```
功能模块分类表：
┌─────────────────┬─────────────────────────────────────────────────────────────┐
│   模块类别      │                    包含的功能                               │
├─────────────────┼─────────────────────────────────────────────────────────────┤
│ 🔐 认证模块     │ 用户登录、用户注册                                         │
│ 👤 用户模块     │ 个人资料管理、用户信息维护                                 │
│ 🤖 AI管理模块   │ AI Agent管理、智能助手配置                                 │
│ 🗺️ 地图核心模块 │ 地图显示、基础地图操作                                     │
│ 🧠 LLM智能模块  │ AI对话、智能分析、聊天历史                                 │
│ 🛠️ GIS分析模块  │ 缓冲区分析、距离分析、叠加分析、要素查询、图层编辑、图层管理 │
└─────────────────┴─────────────────────────────────────────────────────────────┘
```

### **第四层：LLM模式工具面板 (LLM Tools)**
```
/dashboard/llm (在LLMMode.vue中引用)
└── ChatAssistant.vue → src/views/dashboard/LLM/tools/ChatAssistant.vue
```

## 📋 完整的文件路径映射表

| 路由路径 | 路由名称 | 组件文件 | 功能描述 |
|---------|---------|----------|----------|
| `/` | 根路径 | 重定向到 `/dashboard/llm` | 应用入口重定向 |
| `/login` | 用户登录 | `src/views/auth/Login.vue` | 用户认证登录 |
| `/register` | 用户注册 | `src/views/auth/Register.vue` | 新用户注册 |
| `/profile` | 个人中心 | `src/views/profile/UserProfile.vue` | 用户资料管理 |
| `/Agent-management` | AI管理 | `src/views/management/AIManagement.vue` | AI Agent管理 |
| `/dashboard` | 主仪表板 | `src/views/Dashboard.vue` | 应用主界面 |
| `/dashboard/llm` | LLM模式 | `src/views/dashboard/LLM/LLMMode.vue` | AI助手模式 |
| `/dashboard/chat-history` | 聊天历史 | `src/views/dashboard/LLM/ChatHistory.vue` | 历史对话记录 |
| `/dashboard/traditional` | 传统模式 | `src/views/dashboard/traditional/TraditionalMode.vue` | GIS分析模式 |
| `/dashboard/traditional/layer` | 图层管理 | `src/views/dashboard/traditional/tools/LayerManager.vue` | 地图图层管理 |
| `/dashboard/traditional/attribute-selection` | 按属性选择要素 | `src/views/dashboard/traditional/tools/FeatureQueryPanel.vue` | 空间要素查询 |
| `/dashboard/traditional/edit` | 图层编辑 | `src/views/dashboard/traditional/tools/EditTools.vue` | 地图要素编辑 |
| `/dashboard/traditional/buffer` | 缓冲区分析 | `src/views/dashboard/traditional/tools/BufferAnalysisPanel.vue` | 空间缓冲区分析 |
| `/dashboard/traditional/distance` | 距离分析 | `src/views/dashboard/traditional/tools/DistanceAnalysisPanel.vue` | 空间距离分析 |
| `/dashboard/traditional/overlay` | 叠加分析 | `src/views/dashboard/traditional/tools/OverlayAnalysisPanel.vue` | 空间叠加分析 |
| `/dashboard/traditional/area-selection` | 按区域选择要素 | `src/views/dashboard/traditional/tools/AreaSelectionTools.vue` | 按区域选择要素 |

## 📍 关键设计特点

1. **路由驱动**: 每个功能面板都有独立的路由路径
2. **嵌套路由**: 传统模式下的工具面板采用子路由结构
3. **动态导入**: 使用懒加载优化性能
4. **状态管理**: 通过Pinia管理面板状态和模式切换
5. **响应式布局**: 使用splitpanes实现可调整的分割面板
6. **主题系统**: 支持明暗主题切换

## 🔧 路由配置结构

### **传统模式工具配置**
```typescript
const toolConfigs = {
  bianji: { id: 'bianji', title: '按区域选择要素', path: 'area-selection' },
  buffer: { id: 'buffer', title: '缓冲区分析', path: 'buffer' },
  layer: { id: 'layer', title: '图层管理', path: 'layer' },
  distance: { id: 'distance', title: '最短路径分析', path: 'distance' },
  overlay: { id: 'overlay', title: '叠加分析', path: 'overlay' },
          query: { id: 'query', title: '按属性选择要素', path: 'attribute-selection' }
}
```

### **路由守卫配置**
- **认证检查**: 需要登录的页面自动重定向到登录页
- **状态同步**: 路由变化时自动同步到状态管理
- **模式切换**: 支持LLM模式和传统模式间的无缝切换

## 📱 响应式设计

- **桌面端**: 左右分割面板布局
- **移动端**: 上下堆叠布局
- **自适应**: 根据屏幕尺寸自动调整面板大小

这种架构设计实现了功能面板的模块化、可扩展性和良好的用户体验。
