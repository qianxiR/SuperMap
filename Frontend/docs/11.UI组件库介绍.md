# SuperMap UI组件库介绍

## 概述

SuperMap前端项目采用统一的UI组件库设计，所有组件都基于`theme.css`主题系统构建，支持浅色和深色主题的无缝切换。组件库遵循一致的设计语言和交互模式，确保用户体验的统一性。目前组件库包含24个核心组件，覆盖按钮、面板、对话框、输入、通知、显示、布局、查询、数据、主题等10个主要分类。

## 主题系统

### CSS变量管理
所有UI组件都使用`theme.css`中定义的CSS变量，实现主题的统一管理：

```css
/* 基础颜色 */
--bg: #f8f9fa;
--panel: #f9f9f9;
--border: #dee2e6;
--text: #212529;
--accent: #0078D4;

/* 按钮颜色 */
--btn-primary-bg: #0078D4;
--btn-primary-color: #ffffff;
--btn-secondary-bg: #e0e0e0;
--btn-secondary-color: #212529;

/* UI组件专用颜色 */
--ui-overlay-bg: rgba(0, 0, 0, 0.5);
--ui-shadow-light: 0 2px 8px rgba(0, 0, 0, 0.08);
--ui-shadow-medium: 0 8px 32px rgba(0, 0, 0, 0.15);
--ui-shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.3);
--ui-focus-ring: 0 0 0 2px rgba(var(--accent-rgb), 0.1);
--ui-backdrop-blur: blur(10px);
```

### 通用样式类
提供可复用的样式类，简化组件开发：

```css
/* 基础样式类 */
.btn-base { /* 基础按钮样式 */ }
.input-base { /* 基础输入框样式 */ }
.panel-base { /* 基础面板样式 */ }
.scrollbar-base { /* 基础滚动条样式 */ }

/* UI组件样式类 */
.ui-overlay { background: var(--ui-overlay-bg); }
.ui-shadow-light { box-shadow: var(--ui-shadow-light); }
.ui-shadow-medium { box-shadow: var(--ui-shadow-medium); }
.ui-shadow-heavy { box-shadow: var(--ui-shadow-heavy); }
.ui-focus-ring { box-shadow: var(--ui-focus-ring); }
.ui-backdrop-blur { backdrop-filter: var(--ui-backdrop-blur); }
```

## 组件分类

### 1. 按钮组件

#### BaseButton.vue
- **功能**: 基础按钮组件，支持多种变体和状态
- **变体**: primary, secondary, danger, assistant
- **状态**: active, disabled, loading
- **特性**: 支持图标、加载动画、插槽内容
- **颜色变量**: `--btn-primary-bg`, `--btn-primary-color`, `--accent`

#### PrimaryButton.vue
- **功能**: 主要操作按钮
- **变体**: primary, secondary, danger
- **状态**: active, disabled
- **颜色变量**: `--btn-primary-bg`, `--btn-primary-color`, `--accent`

#### SecondaryButton.vue
- **功能**: 次要操作按钮
- **变体**: primary, secondary, danger
- **状态**: active, disabled, loading
- **特性**: 支持加载状态、悬停效果
- **颜色变量**: `--btn-secondary-bg`, `--btn-secondary-color`, `--surface-hover`

#### IconButton.vue
- **功能**: 图标按钮
- **尺寸**: small (28px), medium (36px), large (44px)
- **特性**: 支持SVG图标、响应式设计
- **颜色变量**: `--panel`, `--text`, `--border`

#### ButtonGroup.vue
- **功能**: 按钮组容器
- **用途**: 组合多个按钮的布局

### 2. 面板组件

#### PanelWindow.vue
- **功能**: 可拖拽、可调整大小的面板窗口
- **特性**: 支持嵌入模式、焦点管理、持久化布局
- **颜色变量**: `--panel`, `--border`, `--text`, `--accent`
- **样式**: 使用`--ui-shadow-heavy`阴影效果

#### PanelContainer.vue
- **功能**: 面板容器组件
- **用途**: 包装其他面板组件

### 3. 对话框组件

#### ConfirmDialog.vue
- **功能**: 确认对话框
- **特性**: 模态遮罩、键盘支持、响应式设计
- **颜色变量**: `--ui-overlay-bg`, `--ui-shadow-heavy`, `--panel`, `--border`

#### LayerNameModal.vue
- **功能**: 图层命名模态框
- **用途**: 图层重命名、新建图层

#### EditModal.vue
- **功能**: 编辑模态框
- **用途**: 通用编辑功能

### 4. 输入组件

#### DropdownSelect.vue
- **功能**: 下拉选择组件
- **特性**: 键盘导航、外部点击关闭、禁用状态
- **颜色变量**: `--bg`, `--border`, `--text`, `--accent`
- **样式**: 使用`--ui-focus-ring`焦点样式

#### TraditionalInputGroup.vue
- **功能**: 传统输入组
- **用途**: 表单输入

#### LLMInputGroup.vue
- **功能**: LLM输入组，专为AI对话设计
- **特性**: 支持input和textarea模式、自动高度调整、自定义滚动条
- **用途**: AI对话输入、智能文本输入
- **颜色变量**: `--text`, `--sub`, `--accent`

### 5. 通知组件

#### NotificationToast.vue
- **功能**: 通知提示组件
- **类型**: success, error, info
- **特性**: 自动消失、手动关闭、动画效果、响应式设计
- **颜色变量**: `--ui-shadow-medium`, `--ui-backdrop-blur`, `--panel`, `--accent`
- **样式**: 使用`--ui-backdrop-blur`背景模糊效果

#### NotificationManager.vue
- **功能**: 通知管理器
- **用途**: 统一管理通知显示

### 6. 显示组件

#### LayerItem.vue
- **功能**: 图层项组件
- **特性**: 可见性切换、图层信息显示
- **颜色变量**: `--accent`, `--panel`, `--text`, `--border`

#### TipWindow.vue
- **功能**: 提示窗口
- **变体**: info, warning, success, error
- **颜色变量**: `--surface`, `--accent`, `--text`

#### AutoScrollContainer.vue
- **功能**: 自动滚动容器
- **用途**: 长列表自动滚动

### 7. 布局组件

#### SplitPanel.vue
- **功能**: 分割面板
- **用途**: 可调整大小的面板布局

#### ButtonGroup.vue
- **功能**: 按钮组
- **用途**: 按钮组合显示

### 8. 查询组件

#### QueryConditionRow.vue
- **功能**: 查询条件行
- **用途**: 构建查询条件

### 9. 数据组件

#### DataUploadModal.vue
- **功能**: 数据上传模态框
- **特性**: 文件上传、进度显示

#### UploadButton.vue
- **功能**: 上传按钮组件
- **用途**: 文件上传操作

#### DownloadButton.vue
- **功能**: 下载按钮组件
- **用途**: 文件下载操作

### 10. 主题组件

#### ThemeTransitionOverlay.vue
- **功能**: 主题切换过渡层
- **用途**: 主题切换时的过渡效果

### 11. 布局组件

#### AutoScrollContainer.vue
- **功能**: 自动滚动容器
- **用途**: 长列表自动滚动、智能滚动管理

## 设计原则

### 1. 一致性
- 所有组件使用统一的颜色变量
- 一致的交互模式和动画效果
- 统一的字体和间距规范

### 2. 可访问性
- 支持键盘导航
- 提供适当的ARIA标签
- 确保颜色对比度符合标准

### 3. 响应式设计
- 支持不同屏幕尺寸
- 移动端友好的交互设计
- 自适应布局

### 4. 性能优化
- 禁用不必要的动画和过渡
- 使用CSS变量减少重复代码
- 优化渲染性能

## 使用指南

### 1. 组件引入
```vue
<template>
  <BaseButton variant="primary" @click="handleClick">
    确认
  </BaseButton>
</template>

<script setup>
import BaseButton from '@/components/UI/BaseButton.vue'
</script>
```

### 2. LLM模块组件使用
```vue
<template>
  <div class="chat-container">
    <LLMInputGroup 
      v-model="message" 
      as="textarea" 
      placeholder="请输入消息..."
      @enter="sendMessage"
    />
    <SecondaryButton @click="sendMessage" :loading="isLoading">
      发送
    </SecondaryButton>
  </div>
</template>

<script setup>
import LLMInputGroup from '@/components/UI/LLMInputGroup.vue'
import SecondaryButton from '@/components/UI/SecondaryButton.vue'
</script>
```

### 3. 主题适配
所有组件自动支持主题切换，无需额外配置：

```css
/* 组件会自动使用当前主题的颜色变量 */
.my-component {
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
}
```

### 4. 自定义样式
可以通过CSS变量或样式类进行自定义：

```vue
<template>
  <div class="custom-panel panel-base ui-shadow-medium">
    自定义面板
  </div>
</template>

<style scoped>
.custom-panel {
  /* 使用通用样式类 */
  /* 或通过CSS变量自定义 */
  --custom-color: #ff0000;
}
</style>
```

## 扩展指南

### 1. 新增组件
1. 使用`theme.css`中定义的CSS变量
2. 遵循现有的命名规范
3. 支持浅色和深色主题
4. 添加适当的TypeScript类型定义
5. 参考现有组件的实现模式（如BaseButton、LLMInputGroup等）
6. 确保组件的响应式设计和可访问性

### 2. 新增主题
1. 在`theme.css`中添加新的主题变量
2. 确保所有组件在新主题下正常显示
3. 测试主题切换的流畅性

### 3. 性能优化
1. 使用CSS变量减少重复代码
2. 避免不必要的动画和过渡
3. 优化组件渲染性能
4. 实现智能滚动和懒加载机制
5. 使用事件防抖和节流优化交互性能

## 维护说明

### 1. 颜色管理
- 所有颜色定义集中在`theme.css`
- 新增颜色时考虑浅色和深色主题的适配
- 定期检查颜色对比度和可访问性

### 2. 组件更新
- 保持向后兼容性
- 更新文档和示例
- 测试主题切换功能

### 3. 性能监控
- 监控组件渲染性能
- 优化主题切换速度
- 减少不必要的重渲染
- 监控LLM模块的交互性能
- 优化大量数据渲染的性能

## 组件统计

### 组件数量统计
- **按钮组件**: 5个 (BaseButton, PrimaryButton, SecondaryButton, IconButton, ButtonGroup)
- **面板组件**: 2个 (PanelWindow, PanelContainer)
- **对话框组件**: 3个 (ConfirmDialog, LayerNameModal, EditModal)
- **输入组件**: 3个 (DropdownSelect, TraditionalInputGroup, LLMInputGroup)
- **通知组件**: 2个 (NotificationToast, NotificationManager)
- **显示组件**: 3个 (LayerItem, TipWindow, AutoScrollContainer)
- **布局组件**: 1个 (SplitPanel)
- **查询组件**: 1个 (QueryConditionRow)
- **数据组件**: 3个 (DataUploadModal, UploadButton, DownloadButton)
- **主题组件**: 1个 (ThemeTransitionOverlay)

**总计**: 24个核心组件