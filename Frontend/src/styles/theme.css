:root {
  /* ===== 基础颜色 ===== */
  --bg: #f8f9fa;
  --panel: #f9f9f9;
  --border: #dee2e6;
  --text: #4a5568;
  --text-secondary: #495057;
  --sub: #6c757d;
  --accent: #0078D4;
  --accent-rgb: 0, 120, 212;
  --accent-light: rgba(0, 120, 212, 0.1);
  --glow: 0 2px 8px rgba(0, 0, 0, 0.08);
  --radius: 10px;

  /* ===== 按钮颜色 ===== */
  --btn-primary-bg: #0078D4;
  --btn-primary-color: #ffffff;
  --btn-secondary-bg: #e0e0e0;
  --btn-secondary-color: #4a5568;
  
  /* ===== 基础按钮颜色 ===== */
  --base-btn-bg: var(--panel);
  --base-btn-color: var(--text);
  --base-btn-hover-bg: var(--accent);
  --base-btn-hover-color: #ffffff;
  --base-btn-active-bg: var(--accent);
  --base-btn-active-color: #ffffff;

  /* ===== 链接颜色 ===== */
  --link-color: #0078D4;
  --link-hover-color: rgba(0, 120, 212, 0.8);

  /* ===== 交互颜色 ===== */
  --surface: rgba(0, 0, 0, 0.03);
  --surface-hover: rgba(0, 0, 0, 0.06);
  --divider: #dee2e6;
  --splitter-bg: rgba(0, 0, 0, 0.1);
  --splitter-hover: #0078D4;
  --selection-bg: rgba(0, 0, 0, 0.1);
  
  /* ===== 地图相关颜色 ===== */
  --map-hover-fill: rgba(0, 0, 0, 0.06);
  --map-select-fill: rgba(0, 0, 0, 0.15);
  --map-highlight-color: #0078D4; /* 浅色模式使用主题蓝色边界 */
  --measure-line-color: #0078D4;
  --measure-line-rgb: 0, 120, 212;
  --overview-extent-color: #0078D4;
  --overview-extent-rgb: 0, 120, 212;
  --coordinate-color: #0078D4;
  --scale-color: #0078D4;
  /* 3D 建筑颜色（浅色） */
  --building-3d-color: rgba(0, 120, 212, 0.35);
  
  /* ===== 绘制颜色 - 浅色模式 ===== */
  --draw-color: #0078D4;
  --draw-rgb: 0, 120, 212;
  
  /* ===== 地图容器触摸行为 ===== */
  --map-touch-action: none;
  
  /* ===== 分析及绘制图层颜色 - 浅色模式 ===== */
  --analysis-color: #0078D4;
  --analysis-rgb: 0, 120, 212;
  
  /* ===== 绘制图层样式配置 - 浅色模式 ===== */
  --draw-stroke-color: #0078D4;
  --draw-stroke-width: 2;
  --draw-fill-opacity: 0.3;
  --draw-point-radius: 6;
  --draw-point-stroke-width: 2;
  
  /* ===== 区域选择图层样式配置 - 浅色模式 ===== */
  --area-stroke-color: #0078D4;
  --area-stroke-width: 2;
  --area-fill-opacity: 0.3;
  --area-point-radius: 6;
  --area-point-stroke-width: 2;
  
  /* ===== 查询结果图层样式配置 - 浅色模式 ===== */
  --query-stroke-color: #0078D4;
  --query-stroke-width: 2;
  --query-fill-opacity: 0.3;
  --query-point-radius: 6;
  --query-point-stroke-width: 2;
  
  /* ===== 缓冲区分析图层样式配置 - 浅色模式 ===== */
  --buffer-stroke-color: #0078D4;
  --buffer-stroke-width: 3;
  --buffer-fill-opacity: 0.3;
  --buffer-point-radius: 6;
  --buffer-point-stroke-width: 2;
  
  /* ===== 相交分析图层样式配置 - 浅色模式 ===== */
  --intersect-stroke-color: #0078D4;
  --intersect-stroke-width: 3;
  --intersect-fill-opacity: 0.3;
  --intersect-point-radius: 6;
  --intersect-point-stroke-width: 2;
  
  /* ===== 擦除分析图层样式配置 - 浅色模式 ===== */
  --erase-stroke-color: #0078D4;
  --erase-stroke-width: 3;
  --erase-fill-opacity: 0.3;
  --erase-point-radius: 6;
  --erase-point-stroke-width: 2;
  
  /* ===== 路径分析图层样式配置 - 浅色模式 ===== */
  --path-stroke-color: #0078D4;
  --path-stroke-width: 4;
  --path-fill-opacity: 0.3;
  --path-point-radius: 8;
  --path-point-stroke-width: 2;
  
  /* ===== 上传图层颜色 - 浅色模式 ===== */
  --upload-color: #4a5568;
  --upload-rgb: 74, 85, 104;
  
  /* ===== 上传图层样式配置 - 浅色模式 ===== */
  --upload-stroke-color: #4a5568;
  --upload-stroke-width: 3;
  --upload-fill-opacity: 0.3;
  --upload-point-radius: 6;
  --upload-point-stroke-width: 2;

  /* ===== 弹窗颜色 ===== */
  --field-label-color: #6c757d;
  --field-value-color: #4a5568;
  
  /* ===== 头像颜色 ===== */
  --avatar-ai-bg: #0078D4;
  --avatar-user-bg: #0078D4;

  /* ===== 悬浮功能按钮（固定） ===== */
  --fixed-btn-bg: rgba(249, 249, 249, 0.9); /* 与 --panel 对齐的 rgba 版本 */
  --fixed-btn-bg-hover: rgba(249, 249, 249, 0.95);
  --fixed-btn-border: #dee2e6; /* 与 --border 对齐 */
  
  /* ===== 武汉市县级图层 - 浅色主题 ===== */
  --layer-stroke-武汉_县级: #0078D4;
  --layer-fill-武汉_县级: rgba(0, 120, 212, 0.1);
  
  /* ===== 状态颜色 ===== */
  --success-color: #a72846;
  --error-color: #dc3545;
  --primary-color: #0078D4;
  --primary-color-rgb: 0, 120, 212;
  
  /* ===== 按钮危险操作颜色 ===== */
  --btn-danger-bg: #e74c3c;
  --btn-danger-color: #ffffff;
  --btn-danger-hover-bg: #c0392b;
  --btn-danger-hover-color: #ffffff;
  
  /* ===== 移除按钮专用颜色 ===== */
  --btn-remove-bg: #dc3545;
  --btn-remove-color: #ffffff;
  --btn-remove-hover-bg: #c82333;
  --btn-remove-hover-color: #ffffff;
  --btn-remove-active-bg: #bd2130;
  --btn-remove-active-color: #ffffff;
  --btn-remove-border: #dc3545;
  --btn-remove-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
  --btn-remove-shadow-hover: 0 4px 8px rgba(220, 53, 69, 0.4);
  
  /* ===== UI组件专用颜色 ===== */
  --ui-overlay-bg: rgba(0, 0, 0, 0.5);
  --ui-shadow-light: 0 2px 8px rgba(0, 0, 0, 0.08);
  --ui-shadow-medium: 0 8px 32px rgba(0, 0, 0, 0.15);
  --ui-shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.3);
  --ui-focus-ring: 0 0 0 2px rgba(var(--accent-rgb), 0.1);
  --ui-backdrop-blur: blur(10px);
}

/* Fluid root font-size for responsive scaling */
html {
  font-size: clamp(12px, 0.9vw + 8px, 16px);
}

/* Windows-style dark theme */
[data-theme="dark"] {
  /* ===== 基础颜色 ===== */
  --bg: #1e1e1e;
  --panel: #262626;
  --border: #3c3c3c;
  --text: #ffffff;
  --text-secondary: #b0b0b0;
  --sub: #cccccc;
  --accent: #0078D4;
  --accent-rgb: 0, 120, 212;
  --accent-light: rgba(0, 120, 212, 0.1);
  --glow: 0 2px 8px rgba(0, 0, 0, 0.4);

  /* ===== 按钮颜色 ===== */
  --btn-primary-bg: #0078D4;
  --btn-primary-color: #ffffff;
  --btn-secondary-bg: #373737;
  --btn-secondary-color: #ffffff;
  
  /* ===== 基础按钮颜色 - 深色模式 ===== */
  --base-btn-bg: var(--panel);
  --base-btn-color: var(--text);
  --base-btn-hover-bg: var(--accent);
  --base-btn-hover-color: #ffffff;
  --base-btn-active-bg: var(--accent);
  --base-btn-active-color: #ffffff;

  /* ===== 链接颜色 ===== */
  --link-color: #ffffff;
  --link-hover-color: rgba(255, 255, 255, 0.8);

  /* ===== 交互颜色 ===== */
  --surface: rgba(255, 255, 255, 0.03);
  --surface-hover: rgba(255, 255, 255, 0.06);
  --divider: #484848;
  --splitter-bg: rgba(255, 255, 255, 0.1);
  --splitter-hover: #0078D4;
  --selection-bg: rgba(255, 255, 255, 0.15);
  
  /* 滚动条颜色 */
  --scrollbar-track: rgba(255, 255, 255, 0.1);
  
  /* ===== 状态颜色 ===== */
  --success-color: #28a745;
  --error-color: #dc3545;
  --primary-color: #0078D4;
  --primary-color-rgb: 0, 120, 212;
  --scrollbar-thumb: rgba(255, 255, 255, 0.3);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.5);
  
  /* ===== 按钮危险操作颜色 - 深色模式 ===== */
  --btn-danger-bg: #e74c3c;
  --btn-danger-color: #ffffff;
  --btn-danger-hover-bg: #c0392b;
  --btn-danger-hover-color: #ffffff;
  
  /* ===== UI组件专用颜色 - 深色模式 ===== */
  --ui-overlay-bg: rgba(0, 0, 0, 0.7);
  --ui-shadow-light: 0 2px 8px rgba(0, 0, 0, 0.4);
  --ui-shadow-medium: 0 8px 32px rgba(0, 0, 0, 0.6);
  --ui-shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.8);
  --ui-focus-ring: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
  --ui-backdrop-blur: blur(10px);
  
  /* ===== 地图相关颜色 ===== */
  --map-hover-fill: rgba(255, 255, 255, 0.06);
  --map-select-fill: rgba(255, 255, 255, 0.15);
  --map-highlight-color: #0078D4; /* 深色模式使用主题蓝色边界 */
  --measure-line-color: #ffffff;
  --measure-line-rgb: 255, 255, 255;
  --overview-extent-color: #cccccc;
  --overview-extent-rgb: 204, 204, 204;
  --coordinate-color: #0078D4;
  --scale-color: #0078D4;
  /* 3D 建筑颜色（深色） */
  --building-3d-color: rgba(255, 255, 255, 0.35);
  
  /* ===== 绘制颜色 - 深色模式 ===== */
  --draw-color: #0078D4;
  --draw-rgb: 0, 120, 212;
  
  /* ===== 分析及绘制图层颜色 - 深色模式 ===== */
  --analysis-color: #0078D4;
  --analysis-rgb: 0, 120, 212;
  
  /* ===== 绘制图层样式配置 - 深色模式 ===== */
  --draw-stroke-color: #0078D4;
  --draw-stroke-width: 2;
  --draw-fill-opacity: 0.3;
  --draw-point-radius: 6;
  --draw-point-stroke-width: 2;
  
  /* ===== 区域选择图层样式配置 - 深色模式 ===== */
  --area-stroke-color: #0078D4;
  --area-stroke-width: 2;
  --area-fill-opacity: 0.3;
  --area-point-radius: 6;
  --area-point-stroke-width: 2;
  
  /* ===== 查询结果图层样式配置 - 深色模式 ===== */
  --query-stroke-color: #0078D4;
  --query-stroke-width: 2;
  --query-fill-opacity: 0.3;
  --query-point-radius: 6;
  --query-point-stroke-width: 2;
  
  /* ===== 缓冲区分析图层样式配置 - 深色模式 ===== */
  --buffer-stroke-color: #0078D4;
  --buffer-stroke-width: 3;
  --buffer-fill-opacity: 0.3;
  --buffer-point-radius: 6;
  --buffer-point-stroke-width: 2;
  
  /* ===== 相交分析图层样式配置 - 深色模式 ===== */
  --intersect-stroke-color: #0078D4;
  --intersect-stroke-width: 3;
  --intersect-fill-opacity: 0.3;
  --intersect-point-radius: 6;
  --intersect-point-stroke-width: 2;
  
  /* ===== 擦除分析图层样式配置 - 深色模式 ===== */
  --erase-stroke-color: #0078D4;
  --erase-stroke-width: 3;
  --erase-fill-opacity: 0.3;
  --erase-point-radius: 6;
  --erase-point-stroke-width: 2;
  
  /* ===== 路径分析图层样式配置 - 深色模式 ===== */
  --path-stroke-color: #0078D4;
  --path-stroke-width: 4;
  --path-fill-opacity: 0.3;
  --path-point-radius: 8;
  --path-point-stroke-width: 2;
  
  /* ===== 上传图层颜色 - 深色模式 ===== */
  --upload-color: #ffffff;
  --upload-rgb: 255, 255, 255;
  
  /* ===== 上传图层样式配置 - 深色模式 ===== */
  --upload-stroke-color: #ffffff;
  --upload-stroke-width: 3;
  --upload-fill-opacity: 0.3;
  --upload-point-radius: 6;
  --upload-point-stroke-width: 2;

  /* ===== 弹窗颜色 ===== */
  --field-label-color: #cccccc;
  --field-value-color: #ffffff;
  
  /* ===== 头像颜色 ===== */
  --avatar-ai-bg: #0078D4;
  --avatar-user-bg: #0078D4;

  /* ===== 悬浮功能按钮（固定）- 深色 ===== */
  --fixed-btn-bg: rgba(38, 38, 38, 0.9); /* 与 --panel(#262626) 对齐的 rgba 版本 */
  --fixed-btn-bg-hover: rgba(38, 38, 38, 0.95);
  --fixed-btn-border: #3c3c3c; /* 与 --border 对齐 */
  
  /* ===== 武汉市县级图层 - 深色主题 ===== */
  --layer-stroke-武汉_县级: #ffffff;
  --layer-fill-武汉_县级: rgba(255, 255, 255, 0.1);
}

/* ===== 浅色主题下的经纬度和比例尺颜色 ===== */
.coordinate-text,
.scale-text {
  color: var(--coordinate-color);
}

.scale-line,
.scale-line::before,
.scale-line::after {
  background: var(--scale-color);
}

/* ===== SuperMap图层颜色方案 (浅色主题) ===== */
:root {
  /* ===== 行政区划 (中性色系) ===== */
  /* 市级边界 - 主题蓝色 */
  --layer-stroke-武汉_市级: #0078D4;
  --layer-fill-武汉_市级: rgba(0, 120, 212, 0.05);

  /* 县级边界 - 主题蓝色 */
  --layer-stroke-武汉_县级: var(--accent);
  --layer-fill-武汉_县级: var(--accent-light);

  /* ===== 交通资源 (使用水系颜色) ===== */
  /* 公路 - 青蓝色 */
  --layer-stroke-公路: #16a085;
  --layer-fill-公路: rgba(22, 160, 133, 0.15);

  /* 铁路 - 浅青蓝色 */
  --layer-stroke-铁路: #48c9b0;
  --layer-fill-铁路: rgba(72, 201, 176, 0.12);

  /* ===== 水系 (蓝色系) ===== */
  /* 水系面 - 蓝色 */
  --layer-stroke-水系面: #3498db;
  --layer-fill-水系面: rgba(52, 152, 219, 0.20);

  /* 水系线 - 浅蓝色 */
  --layer-stroke-水系线: #5dade2;
  --layer-fill-水系线: rgba(93, 173, 226, 0.15);

  /* ===== 建筑物 (中性色系) ===== */
  /* 建筑物面 - 暖灰色 */
  --layer-stroke-建筑物面: #7f8c8d;
  --layer-fill-建筑物面: rgba(127, 140, 141, 0.12);

  /* ===== 民生设施 (蓝色系渐变) ===== */
  /* 学校 - 深蓝色 */
  --layer-stroke-学校: #1565c0;
  --layer-fill-学校: rgba(21, 101, 192, 0.25);

  /* 医院 - 中蓝色 */
  --layer-stroke-医院: #1976d2;
  --layer-fill-医院: rgba(25, 118, 210, 0.25);

  /* 居民地地名点 - 浅蓝色 */
  --layer-stroke-居民地地名点: #2196f3;
  --layer-fill-居民地地名点: rgba(33, 150, 243, 0.25);
}

/* ===== SuperMap图层颜色方案 (深色主题) ===== */
[data-theme="dark"] {
  /* ===== 行政区划 (中性色系) ===== */
  /* 市级边界 - 主题蓝色 */
  --layer-stroke-武汉_市级: #0078D4;
  --layer-fill-武汉_市级: rgba(0, 120, 212, 0.08);

  /* 县级边界 - 主题蓝色 */
  --layer-stroke-武汉_县级: var(--accent);
  --layer-fill-武汉_县级: var(--accent-light);

  /* ===== 交通资源 (使用水系颜色) ===== */
  /* 公路 - 亮青蓝色 */
  --layer-stroke-公路: #1abc9c;
  --layer-fill-公路: rgba(26, 188, 156, 0.18);

  /* 铁路 - 亮浅青蓝色 */
  --layer-stroke-铁路: #48c9b0;
  --layer-fill-铁路: rgba(72, 201, 176, 0.15);

  /* ===== 水系 (蓝色系) ===== */
  /* 水系面 - 亮蓝色 */
  --layer-stroke-水系面: #3498db;
  --layer-fill-水系面: rgba(52, 152, 219, 0.25);

  /* 水系线 - 亮浅蓝色 */
  --layer-stroke-水系线: #5dade2;
  --layer-fill-水系线: rgba(93, 173, 226, 0.20);

  /* ===== 建筑物 (中性色系) ===== */
  /* 建筑物面 - 浅灰色 */
  --layer-stroke-建筑物面: #95a5a6;
  --layer-fill-建筑物面: rgba(149, 165, 166, 0.15);

  /* ===== 民生设施 (蓝色系渐变) ===== */
  /* 学校 - 亮深蓝色 */
  --layer-stroke-学校: #1976d2;
  --layer-fill-学校: rgba(25, 118, 210, 0.30);

  /* 医院 - 亮中蓝色 */
  --layer-stroke-医院: #2196f3;
  --layer-fill-医院: rgba(33, 150, 243, 0.30);

  /* 居民地地名点 - 亮浅蓝色 */
  --layer-stroke-居民地地名点: #42a5f5;
  --layer-fill-居民地地名点: rgba(66, 165, 245, 0.30);
}

/* ===== 深色主题特殊样式 ===== */
/* 确保黑色主题下所有弹出窗口使用浅色字体 */
[data-theme="dark"] .panel-window,
[data-theme="dark"] .confirm-dialog,
[data-theme="dark"] .notification-toast,
[data-theme="dark"] .popup-body,
[data-theme="dark"] .feature-info,
[data-theme="dark"] .multi-feature-info {
  color: #ffffff !important;
}

[data-theme="dark"] .panel-window *,
[data-theme="dark"] .confirm-dialog *,
[data-theme="dark"] .notification-toast *,
[data-theme="dark"] .popup-body *,
[data-theme="dark"] .feature-info *,
[data-theme="dark"] .multi-feature-info * {
  color: inherit;
}

/* 确保黑色主题下弹出窗口中的文本元素使用浅色 */
[data-theme="dark"] .panel-title,
[data-theme="dark"] .dialog-title,
[data-theme="dark"] .toast-title,
[data-theme="dark"] .toast-message,
[data-theme="dark"] .dialog-message,
[data-theme="dark"] .feature-count,
[data-theme="dark"] .feature-header,
[data-theme="dark"] .field-label,
[data-theme="dark"] .field-value,
[data-theme="dark"] .k,
[data-theme="dark"] .v,
[data-theme="dark"] .section-title {
  color: #ffffff !important;
}

/* 确保黑色主题下弹出窗口中的次要文本使用浅灰色 */
[data-theme="dark"] .field-label,
[data-theme="dark"] .k {
  color: #cccccc !important;
}

/* 确保黑色主题下提示窗口使用浅色字体 */
[data-theme="dark"] .tip-window,
[data-theme="dark"] .tip-content,
[data-theme="dark"] .tip-text {
  color: #ffffff !important;
}

/* 确保黑色主题下所有模态框和对话框使用浅色字体 */
[data-theme="dark"] .modal-content,
[data-theme="dark"] .modal-header,
[data-theme="dark"] .modal-body,
[data-theme="dark"] .modal-footer {
  color: #ffffff !important;
}

[data-theme="dark"] .modal-content *,
[data-theme="dark"] .modal-header *,
[data-theme="dark"] .modal-body *,
[data-theme="dark"] .modal-footer * {
  color: inherit;
}

/* 确保黑色主题下标题使用蓝色强调色 */
[data-theme="dark"] .screen-title {
  color: var(--accent) !important;
}

[data-theme="dark"] .coordinate-text,
[data-theme="dark"] .scale-text {
  color: #ffffff !important;
}

[data-theme="dark"] .scale-line,
[data-theme="dark"] .scale-line::before,
[data-theme="dark"] .scale-line::after {
  color: #ffffff !important;
}

[data-theme="dark"] .coordinate-text,
[data-theme="dark"] .scale-text {
  background: var(--panel) !important;
  border-color: var(--border) !important;
  color: #ffffff !important;
}

[data-theme="dark"] .scale-line,
[data-theme="dark"] .scale-line::before,
[data-theme="dark"] .scale-line::after {
  background: #ffffff !important;
}

/* 确保黑色主题下验证消息使用浅色字体 */
[data-theme="dark"] .validation-success,
[data-theme="dark"] .validation-warning {
  color: #ffffff !important;
}

/* 确保黑色主题下测量组件使用浅色字体 */
[data-theme="dark"] .area-measure-panel,
[data-theme="dark"] .distance-measure-panel,
[data-theme="dark"] .distance-measure-button {
  color: #ffffff !important;
}

[data-theme="dark"] .area-measure-panel *,
[data-theme="dark"] .distance-measure-panel *,
[data-theme="dark"] .distance-measure-button * {
  color: inherit;
}

[data-theme="dark"] .measure-btn {
  background: var(--panel) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

[data-theme="dark"] .measure-btn.active {
  background: var(--accent) !important;
  color: white !important;
}

/* ===== 工具类样式 ===== */
/* Utility panel style (optional reuse) */
.card-panel {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--glow);
}

.btn-primary {
  background: var(--btn-primary-bg);
  color: var(--btn-primary-color);
}

.btn-secondary {
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-color);
  border: 1px solid var(--border);
}

/* ===== UI组件通用样式类 ===== */
.ui-overlay {
  background: var(--ui-overlay-bg);
}

.ui-shadow-light {
  box-shadow: var(--ui-shadow-light);
}

.ui-shadow-medium {
  box-shadow: var(--ui-shadow-medium);
}

.ui-shadow-heavy {
  box-shadow: var(--ui-shadow-heavy);
}

.ui-focus-ring {
  box-shadow: var(--ui-focus-ring);
}

.ui-backdrop-blur {
  backdrop-filter: var(--ui-backdrop-blur);
}

/* ===== 按钮通用样式 ===== */
.btn-base {
  border: 1px solid var(--border);
  border-radius: 6px;
  font-family: "Segoe UI", PingFang SC, Microsoft YaHei, Arial, sans-serif;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;
}

.btn-base:focus {
  box-shadow: var(--ui-focus-ring);
}

.btn-base:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ===== 输入框通用样式 ===== */
.input-base {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-family: inherit;
  outline: none;
  transition: all 0.2s ease;
}

.input-base:focus {
  border-color: var(--accent);
  box-shadow: var(--ui-focus-ring);
}

.input-base:hover:not(:disabled) {
  border-color: var(--accent);
  background: var(--surface-hover);
}

/* ===== 面板通用样式 ===== */
.panel-base {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--glow);
}

/* ===== 滚动条通用样式 ===== */
.scrollbar-base::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.scrollbar-base::-webkit-scrollbar-track {
  background: var(--scrollbar-track, rgba(200, 200, 200, 0.1));
  border-radius: 3px;
}

.scrollbar-base::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb, rgba(150, 150, 150, 0.3));
  border-radius: 3px;
}

.scrollbar-base::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover, rgba(150, 150, 150, 0.5));
}

/* Openlayers controls theme */
.ol-zoom {
  background: var(--panel) !important;
  border: 1px solid var(--border) !important;
  border-radius: 10px !important;
  box-shadow: var(--glow) !important;
  padding: 4px !important;
}

.ol-control button {
  background: var(--btn-primary-bg) !important;
  color: var(--btn-primary-color) !important;
  border: 1px solid var(--border) !important;
  border-radius: 6px !important;
  width: 1.75rem !important;
  height: 1.75rem !important;
}

.ol-control button:hover {
  background: var(--surface-hover, var(--btn-primary-bg)) !important;
  transform: translateY(-1px);
}

/* FeaturePopup common text colors */
.popup .hd { color: var(--sub) !important; }
.popup { 
  background: var(--panel) !important; 
  border: 1px solid var(--border) !important; 
  box-shadow: var(--glow) !important; 
  color: var(--text) !important; 
}

/* Feature popup styles */
.feature-info {
  max-width: 300px;
}

.multi-feature-info {
  max-width: 400px;
}

.feature-count {
  font-weight: 600;
  color: var(--accent);
  margin-bottom: 8px;
  font-size: 14px;
}

.feature-item {
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 8px;
  margin-bottom: 8px;
  background: var(--surface);
}

.feature-header {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 6px;
  font-size: 13px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 4px;
}

.field-row {
  display: flex;
  margin-bottom: 4px;
  font-size: 12px;
}

.field-label {
  color: var(--field-label-color);
  font-weight: 500;
  min-width: 80px;
  flex-shrink: 0;
}

.field-value {
  color: var(--field-value-color);
  word-break: break-word;
  margin-left: 8px;
}

/* layer group styles */
.layer-group {
  margin-bottom: 16px;
}

.group-title {
  font-size: 12px;
  color: var(--sub);
  margin-bottom: 8px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.group-items {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* ===== 防闪烁样式 ===== */
/* 全局防闪烁样式 - 防止主题切换时的颜色闪烁 */
*,
*::before,
*::after {
  transition: none !important;
  animation: none !important;
}

/* 特定组件的防闪烁样式 */
.overview-map-container,
.layer-item,
.analysis-section,
.feature-query-panel,
.layer-manager-panel,
.map-container,
.theme-switch-container {
  transition: none !important;
}

.overview-map-container *,
.layer-item *,
.analysis-section *,
.feature-query-panel *,
.layer-manager-panel *,
.map-container *,
.theme-switch-container * {
  transition: none !important;
  animation: none !important;
}

/* 确保Openlayers地图在主题切换时不闪烁 */
.ol-viewport,
.ol-canvas,
.ol-control,
.ol-layer,
.ol-tile {
  transition: none !important;
  animation: none !important;
}

/* 修复Openlayers被动事件监听器问题 */
.ol-viewport {
  touch-action: var(--map-touch-action, none);
}

/* 按钮和交互元素的防闪烁 */
button,
.btn,
.overview-toggle-btn,
.theme-toggle-btn {
  transition: none !important;
  animation: none !important;
}

/* 面板和容器的防闪烁 */
.panel-window,
.panel-container,
.app-container,
.main-container {
  transition: none !important;
  animation: none !important;
}

.panel-window *,
.panel-container *,
.app-container *,
.main-container * {
  transition: none !important;
  animation: none !important;
}

/* 地图相关元素的防闪烁 */
.map-viewport,
.map-canvas,
.map-controls {
  transition: none !important;
  animation: none !important;
}

/* 主题切换时的特殊处理 */
[data-theme] {
  transition: none !important;
}

[data-theme] * {
  transition: none !important;
  animation: none !important;
}
